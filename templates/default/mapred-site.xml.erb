<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="chttps://gist.github.com/24700dabe031f4b1a6c8onfiguration.xsl"?>

<!-- Generated by Chef for <%= @node[:fqdn] %> -->

<configuration>

  <!-- General Task config -->

  <property>
     <name>mapred.job.tracker</name>
     <value>hdfs://<%= @node[:Hadoop][:Jobtracker][:Host] %>:<%= @node[:Hadoop][:Jobtracker][:Port] %></value>
  </property>

  <property>
     <name>mapred.job.reuse.jvm.num.tasks</name>
     <value><%= @node[:Hadoop][:Mapred][:mapredJobReuseJvmNumTasks] %></value>
  </property>

  <property> 
    <name>mapred.jobtracker.taskScheduler</name> 
    <value>org.apache.hadoop.mapred.FairScheduler</value> 
  </property>

  <property>
    <name>mapred.max.tracker.failures</name>
    <value><%= @node[:Hadoop][:Mapred][:mapredMaxTrackerFailures] %></value>
  </property>

  <property>
     <name>mapred.output.compress</name>
     <value>true</value>
  </property>

  <property>
     <name>mapred.output.compression.type</name>
     <value>BLOCK</value>
  </property>

  <!-- Map task config -->

  <property>
     <name>mapred.map.child.java.opts</name>
     <value><%= @node[:Hadoop][:Mapred][:mapredMapChildJavaOpts] %></value>
  </property>

  <property>
     <name>mapred.tasktracker.map.tasks.maximum</name>
     <value><%= @node[:Hadoop][:Mapred][:mapredTasktrackerMapTasksMaximum] %></value>
  </property>

  <property>
    <name>mapred.map.max.attempts</name>
    <value><%= @node[:Hadoop][:Mapred][:mapredMapMaxAttempts] %></value>
  </property>

  <property>
    <name>mapred.map.tasks.speculative.execution</name>
    <value><%= @node[:Hadoop][:Mapred][:mapredMapTasksSpeculativeExecution] %></value>
  </property>

  <!-- Reduce task config -->

  <property>
     <name>mapred.reduce.child.java.opts</name>
     <value><%= @node[:Hadoop][:Mapred][:mapredReduceChildJavaOpts] %></value>
  </property>

  <property>
     <name>mapred.tasktracker.reduce.tasks.maximum</name>
     <value><%= @node[:Hadoop][:Mapred][:mapredTasktrackerReduceTasksMaximum] %></value>
  </property>

  <property>
    <name>mapred.reduce.max.attempts</name>
    <value><%= @node[:Hadoop][:Mapred][:mapredReduceMaxAttempts] %></value>
  </property>

  <property>
    <name>mapred.reduce.tasks.speculative.execution</name>
    <value><%= @node[:Hadoop][:Mapred][:mapredReduceTasksSpeculativeExecution] %></value>
  </property>

  <property>
    <name>mapred.reduce.parallel.copies</name>
    <value><%= @node[:Hadoop][:Mapred][:reduceParallelCopies] %></value>
  </property>

  <property>
    <name>io.sort.mb</name>
    <value><%= @node[:Hadoop][:Mapred][:ioSortMb] %></value>
  </property>

  <property>
    <name>io.sort.factor</name>
    <value><%= @node[:Hadoop][:Mapred][:ioSortFactor] %></value>
  </property>

</configuration>
